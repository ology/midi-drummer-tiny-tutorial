<!DOCTYPE html SYSTEM "about:legacy-compat"><html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="utf-8" />
		<meta content="width=device-width, initial-scale=1" name="viewport" />
		<title>
			MIDI-Drummer-Tiny — Advanced
		</title>
		<link href="https://ology.github.io/midi-drummer-tiny-tutorial/assets/styles/main.css?v=1680922391" rel="stylesheet" />
		<link href="//unpkg.com/@highlightjs/cdn-assets@11.7.0/styles/github.min.css" rel="stylesheet" />
	</head>
	<body class="page from-pod" id="top">
		<header>
			<nav class="navbar navbar-expand-lg">
				<div class="container">
					<a class="navbar-brand" href="https://ology.github.io/midi-drummer-tiny-tutorial/">MIDI-Drummer-Tiny</a>
					<button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
							<li class="nav-item">
								<a class="nav-link" href="https://ology.github.io/midi-drummer-tiny-tutorial/installation.html" rel="related" target="_self">Installation</a>
							</li>
							<li class="nav-item dropdown">
								<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Tutorial</a>
								<ul class="dropdown-menu">
									<li>
										<a class="dropdown-item" href="https://ology.github.io/midi-drummer-tiny-tutorial/tutorial/quickstart.html" rel="related" target="_self">
											<i class="fa-solid fa-bicycle"></i>
											Quick-start
										</a>
									</li>
									<li>
										<a class="dropdown-item" href="https://ology.github.io/midi-drummer-tiny-tutorial/tutorial/basics.html" rel="related" target="_self">
											<i class="fa-solid fa-car-side"></i>
											Basics
										</a>
									</li>
									<li>
										<a class="dropdown-item active" href="https://ology.github.io/midi-drummer-tiny-tutorial/tutorial/advanced.html" rel="related" target="_self">
											<i class="fa-solid fa-jet-fighter"></i>
											Advanced
										</a>
									</li>
								</ul>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="https://metacpan.org/dist/MIDI-Drummer-Tiny" rel="related" target="_blank">
									<i class="fa-solid fa-circle-dot"></i>
									CPAN
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="https://github.com/ology/MIDI-Drummer-Tiny" rel="related" target="_blank">
									<i class="fa-brands fa-github"></i>
									GitHub
								</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>
		<main>
			<div class="heading container py-3">
				<h1 class="display-2">
					Advanced
				</h1>
			</div>
			<article class="container">
				<span id="___top"></span>
				<h2>
					<span id="Version">
						Version
					</span>
				</h2>
				<p>
					version 0.4206
				</p>
				<h2>
					<span id="Advanced_Grooves">
						Advanced Grooves
					</span>
				</h2>
				<h3>
					<span id="Cold_Sweat_(Clyde_Stubblefield)">
						Cold Sweat (Clyde Stubblefield)
					</span>
				</h3>
				<pre><code>  my $accent = 30;

  for my $n (1 .. $d-&gt;bars) {
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;kick);
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh);

      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;snare);
      $d-&gt;note($d-&gt;sixteenth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;sixteenth, $d-&gt;snare);

      $d-&gt;note($d-&gt;sixteenth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;sixteenth, $d-&gt;snare);
      $d-&gt;note($d-&gt;eighth, $d-&gt;open_hh, $d-&gt;kick);

      $d-&gt;note($d-&gt;eighth, $d-&gt;pedal_hh);
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;snare);

      $d-&gt;note($d-&gt;sixteenth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;sixteenth, $d-&gt;snare);
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;kick);

      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;snare);
      $d-&gt;note($d-&gt;sixteenth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;sixteenth, $d-&gt;snare);

      $d-&gt;note($d-&gt;sixteenth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;sixteenth, $d-&gt;snare);
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;kick);

      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh, $d-&gt;snare);
      $d-&gt;note($d-&gt;eighth, $d-&gt;closed_hh);
  }</code></pre>
				<h3>
					<span id="Fool_in_the_Rain_(John_Bonham)">
						Fool in the Rain (John Bonham)
					</span>
				</h3>
				<pre><code>  my ($min, $max) = (30, 127);

  for my $n (1 .. $d-&gt;bars) {
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);
      $d-&gt;rest($d-&gt;triplet_eighth);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;open_hh, $d-&gt;kick);

      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;pedal_hh);
      $d-&gt;accent_note($min, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);

      $d-&gt;accent_note($max, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;rest($d-&gt;triplet_eighth);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);

      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);
      $d-&gt;accent_note($min, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);
  }</code></pre>
				<h3>
					<span id="The_Purdie_Shuffle_(Bernard_Purdie)">
						The Purdie Shuffle (Bernard Purdie)
					</span>
				</h3>
				<pre><code>  my $accent = 30;

  for my $n (1 .. $d-&gt;bars) {
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);
      $d-&gt;accent_note($accent, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);

      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);

      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;snare);
      $d-&gt;accent_note($accent, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);

      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh);
      $d-&gt;accent_note($accent, $d-&gt;triplet_eighth, $d-&gt;snare);
      $d-&gt;note($d-&gt;triplet_eighth, $d-&gt;closed_hh, $d-&gt;kick);
  }</code></pre>
				<h3>
					<span id="The_Black_Page_(Frank_Zappa)">
						The Black Page (Frank Zappa)
					</span>
				</h3>
				<p>
					This is an exercise for the reader. It is one of the most advanced grooves ever. It makes use of a number of "tuplets". For instance: a half note triplet duration with groups of 5 notes for quarter notes within. Oof!
				</p>
				<p>
					Please see this
					<a class="podlinkurl" href="https://github.com/ology/MIDI-Drummer-Tiny/blob/master/eg/black-page">long program</a>
					, which is in the
					<em>
						eg/
					</em>
					directory of this distribution.
				</p>
				<h2>
					<span id="Utility_Method">
						Utility Method
					</span>
				</h2>
				<h3>
					<span id="sync()">
						sync()
					</span>
				</h3>
				<p>
					This method is identical to the MIDI score method. It's just a convenient wrapper for the drummer, as shown below.
				</p>
				<h2>
					<span id="Beat-string_Patterns">
						Beat-string Patterns
					</span>
				</h2>
				<h3>
					<span id="pattern()">
						pattern()
					</span>
				</h3>
				<p>
					If bit-strings are considered to be beats (
					<code>
						1
					</code>
					for a note-on strike and
					<code>
						0
					</code>
					for no strike), then we shall call them "beat-strings." :)
				</p>
				<pre><code>  $d-&gt;pattern(
      patterns   =&gt; [qw( 0101 0101 0110 0110 )],
      instrument =&gt; $d-&gt;snare,
      %options,
  );</code></pre>
				<p>
					The options and their defaults are the following:
				</p>
				<pre><code>  duration: quarter-note
  beats:    given by constructor
  repeat:   1
  negate:   0 (flip the bit values)
  vary:     {
      0 =&gt; sub { $self-&gt;rest( $args{duration} ) },
      1 =&gt; sub { $self-&gt;note( $args{duration}, $args{instrument} ) },
  }</code></pre>
				<p>
					Those are all fairly obvious except for the last "vary" option. This defines what to do (or not do) given the digit of the beat-string. For
					<code>
						0
					</code>
					, we rest - for the given (or default) duration. For
					<code>
						1
					</code>
					, we add a note to the score.
				</p>
				<p>
					This "vary" option can be made up on the fly, by the caller. We can therefore provide different behaviors to perform, when this method is called.
				</p>
				<p>
					Now the string doesn't need to contain only ones and zeros! The string could have a
					<code>
						2
					</code>
					in it! The "vary" would then need to contain a
					<code>
						2
					</code>
					key, with instructions for what to do - like roll, possibly.
				</p>
				<h3>
					<span id="sync_patterns()">
						sync_patterns()
					</span>
				</h3>
				<p>
					Ok. That's fine for a single voice. But more often we want to multitrack different parts simultaneously? Enter the
					<code>
						sync_patterns
					</code>
					method.
				</p>
				<pre><code>  $d-&gt;sync_patterns(
      $d-&gt;open_hh =&gt; [ '11111111') ],
      $d-&gt;snare   =&gt; [ '0101' ],
      $d-&gt;kick    =&gt; [ '1010' ],
  ) for 1 .. $d-&gt;bars;</code></pre>
				<p>
					The hi-hat is 8 beats long. The kick and snare are 4 beats each. This means that the kick and snare are quarter notes, and the hi-hat will be treated as eighth notes, because a "common multiple" is computed.
				</p>
				<h3>
					<span id="sync()_Revisited">
						sync() Revisited
					</span>
				</h3>
				<p>
					For finer-grain control, you should use the above
					<code>
						pattern
					</code>
					method combined with the
					<code>
						sync
					</code>
					method:
				</p>
				<pre><code>  $d-&gt;sync(
    sub { $d-&gt;pattern(
        instrument =&gt; $d-&gt;closed_hh,
        patterns   =&gt; [ '11111111' ]
    )},
    sub { $d-&gt;pattern(
        instrument =&gt; $d-&gt;snare,
        patterns   =&gt; [ $my_pattern-&gt;($snare_onset, 16) ]
    )},
    sub { $d-&gt;pattern(
        instrument =&gt; $d-&gt;kick,
        patterns   =&gt; [ $my_pattern-&gt;($kick_onset, 16) ]
    )},
  ) for 1 .. $d-&gt;bars - 1;</code></pre>
				<p>
					Why
					<code>
						bars - 1
					</code>
					? Because next up is a one measure fill!
				</p>
				<p>
					What is
					<code>
						my_pattern
					</code>
					? That is an imaginary routine that takes a number of onsets and a total number of beats; much like the
					<code>
						euclid
					</code>
					function in the
					<a class="podlinkurl" href="https://metacpan.org/pod/Music::CreatingRhythms">CreatingRhythms</a>
					module. Hint hint. ;)
				</p>
				<h2>
					<span id="Fills">
						Fills
					</span>
				</h2>
				<p>
					This is a work in progress, and is tricky to get right... It uses beat-stings:
				</p>
				<pre><code>  $d-&gt;add_fill(
      sub { # this is the fill itself
          my $self = shift;
          return {
            duration         =&gt; 16, # a 16-beat fill
            $self-&gt;closed_hh =&gt; '00000000',
            $self-&gt;snare     =&gt; '11111111',
            $self-&gt;kick      =&gt; '10001000',
          };
      },
      # the phrase to play before the fill
      $d-&gt;closed_hh =&gt; [ '11111111' ],
      $d-&gt;snare     =&gt; [ '0101' ],
      $d-&gt;kick      =&gt; [ '1010' ],
  );</code></pre>
				<h2>
					<span id="Copyright_and_License">
						Copyright and License
					</span>
				</h2>
				<p>
					This software is copyright (c) 2014-2023 by Gene Boggs.
				</p>
				<p>
					This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.
				</p>
			</article>
		</main>
		<div style="height: 150px; overflow: hidden;">
			<svg preserveaspectratio="none" style="height: 100%; width: 100%;" viewbox="0 0 500 150">
				<path d="M0.00,49.98 C138.82,121.67 349.20,-49.98 500.00,49.98 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: rgba(var(--bs-dark-rgb), 1);"></path>
			</svg>
		</div>
		<footer id="bottom">
			<div class="container">
				<div class="row">
					<div class="col-12 col-lg-12">
						<h2>
							Contributing
						</h2>
						<p>
							MIDI-Drummer-Tiny is an open source project
							<a href="https://github.com/ology/MIDI-Drummer-Tiny">hosted on GitHub</a>
							— open an issue if you have an idea or find a bug.
						</p>
						<p>
							<img alt="GitHub repo stars" src="https://img.shields.io/github/stars/ology/MIDI-Drummer-Tiny?style=social" />
						</p>
					</div>
					<div class="col-12 text-center pt-3">
						<p>
							Copyright © 2023 Gene Boggs. All rights reserved.
						</p>
					</div>
				</div>
			</div>
		</footer>
		<a href="#top" id="return-to-top">
			<i class="fa-solid fa-circle-up"></i>
		</a>
		<script src="https://ology.github.io/midi-drummer-tiny-tutorial/assets/scripts/bootstrap.bundle.min.js"></script>
		<script crossorigin="anonymous" src="//kit.fontawesome.com/6d700b1a29.js"></script>
		<script src="//unpkg.com/@highlightjs/cdn-assets@11.7.0/highlight.min.js"></script>
		<script>/* <![CDATA[ */
			/* ]]> *//* <![CDATA[ */const classy_scroll = function () { const scroll = document.documentElement.scrollTop; const avail = window.screen.availHeight; if ( scroll > 75 ) { document.body.classList.add( 'is-scrolled' ); document.body.classList.remove( 'at-top' ); } else if ( scroll < 25 ) { document.body.classList.remove( 'is-scrolled' ); document.body.classList.add( 'at-top' ); } if ( scroll > avail ) { document.body.classList.add( 'is-scrolled-deeply' ); } else if ( scroll < avail ) { document.body.classList.remove( 'is-scrolled-deeply' ); } }; classy_scroll(); window.addEventListener( 'scroll', classy_scroll ); hljs.highlightAll();
		/* ]]> */</script>
	</body>
</html>